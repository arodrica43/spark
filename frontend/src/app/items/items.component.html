<div class="items-container">
  <h2>Items Management</h2>

  <div class="error" *ngIf="error">
    {{ error }}
  </div>

  <div class="create-item card">
    <h3>Create New Item</h3>
    <form (ngSubmit)="createItem()">
      <div class="form-group">
        <label for="name">Name:</label>
        <input
          id="name"
          type="text"
          [(ngModel)]="newItem.name"
          name="name"
          required
          [disabled]="loading"
        />
      </div>
      <div class="form-group">
        <label for="description">Description:</label>
        <textarea
          id="description"
          [(ngModel)]="newItem.description"
          name="description"
          rows="3"
          [disabled]="loading"
        ></textarea>
      </div>
      <button type="submit" [disabled]="loading || !newItem.name">
        {{ loading ? 'Creating...' : 'Create Item' }}
      </button>
    </form>
  </div>

  <div class="items-list">
    <h3>Items List</h3>
    <div *ngIf="loading && items.length === 0" class="loading">
      Loading items...
    </div>

    <div *ngIf="items.length === 0 && !loading" class="empty">
      No items found. Create one above!
    </div>

    <div *ngFor="let item of items" class="item-card card">
      <div *ngIf="editingItem?.id !== item.id" class="item-view">
        <h4>{{ item.name }}</h4>
        <p>{{ item.description || 'No description' }}</p>
        <div class="item-actions">
          <button (click)="editItem(item)" [disabled]="loading">Edit</button>
          <button (click)="deleteItem(item.id)" [disabled]="loading" class="delete-btn">
            Delete
          </button>
        </div>
      </div>

      <div *ngIf="editingItem?.id === item.id" class="item-edit">
        <form (ngSubmit)="updateItem()">
          <div class="form-group">
            <label>Name:</label>
            <input
              type="text"
              [(ngModel)]="editingItem.name"
              name="editName"
              required
              [disabled]="loading"
            />
          </div>
          <div class="form-group">
            <label>Description:</label>
            <textarea
              [(ngModel)]="editingItem.description"
              name="editDescription"
              rows="3"
              [disabled]="loading"
            ></textarea>
          </div>
          <div class="item-actions">
            <button type="submit" [disabled]="loading">Save</button>
            <button type="button" (click)="cancelEdit()" [disabled]="loading" class="cancel-btn">
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
